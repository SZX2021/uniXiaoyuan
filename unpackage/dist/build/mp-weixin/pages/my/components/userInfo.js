(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/my/components/userInfo"],{2453:function(e,n,t){"use strict";t.r(n);var a=t("34cf"),r=t.n(a);for(var o in a)["default"].indexOf(o)<0&&function(e){t.d(n,e,(function(){return a[e]}))}(o);n["default"]=r.a},"34cf":function(e,n,t){"use strict";(function(e,a){var r=t("4ea4");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=r(t("2eee")),u=r(t("c973")),i={data:function(){return{avatarUrl:"https://mmbiz.qpic.cn/mmbiz/icTdbqWNOwNRna42FI242Lcia07jQodd2FJGIYQfG0LAJGFxM4FbnQP6yfMxBgJ0F3YRqJCJ1aPAK2dQagdusBZg/0",userInfo:{user_name:"",user_gender:"男",user_phoneNumber:"",user_signature:""},userNameValid:!0,phoneNumberValid:!0}},onShow:function(){this.userInfo=e.getStorageSync("user_info")},methods:{onChooseAvatar:function(n){var t=this,a=n.detail.avatarUrl;e.getFileSystemManager().readFile({filePath:a,encoding:"base64",success:function(e){var n="data:image/jpeg;base64,"+e.data;t.avatarUrl=n},fail:function(e){console.log("图片转换失败"+e)}})},radioChange:function(e){this.userInfo.user_gender=e.detail.value},formSubmit:function(){var n=this;return(0,u.default)(o.default.mark((function t(){var r,u,i,s;return o.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.showLoading({title:"加载中"}),r=n.userInfo,e.setStorageSync("user_info",r),u=n.validateForm(r),u.valid){t.next=7;break}return e.showToast({title:u.errorMessage,icon:"none",duration:2e3}),t.abrupt("return");case 7:return i=e.getStorageSync("token"),t.next=10,a.callFunction({name:"user-info",data:{token:i,userInfo:r}});case 10:s=t.sent,console.log(s),"ok"===s.result?(e.hideLoading(),e.setStorageSync("user_info",r),e.reLaunch({url:"/pages/my/my"})):e.showToast({title:"保存失败",duration:2e3,icon:"error"});case 13:case"end":return t.stop()}}),t)})))()},validateForm:function(e){if(!e.user_name.length)return{valid:!1,errorMessage:"名字不能为空"};return/^[1][3,4,5,7,8][0-9]{9}$/.test(e.user_phoneNumber)?{valid:!0}:{valid:!1,errorMessage:"手机号不正确"}}}};n.default=i}).call(this,t("543d")["default"],t("a9ff")["default"])},"41c2":function(e,n,t){"use strict";t.d(n,"b",(function(){return a})),t.d(n,"c",(function(){return r})),t.d(n,"a",(function(){}));var a=function(){var e=this.$createElement;this._self._c},r=[]},6891:function(e,n,t){"use strict";t.r(n);var a=t("41c2"),r=t("2453");for(var o in r)["default"].indexOf(o)<0&&function(e){t.d(n,e,(function(){return r[e]}))}(o);t("6baa");var u=t("f0c5"),i=Object(u["a"])(r["default"],a["b"],a["c"],!1,null,null,null,!1,a["a"],void 0);n["default"]=i.exports},"6baa":function(e,n,t){"use strict";var a=t("9d5e"),r=t.n(a);r.a},"9d5e":function(e,n,t){},e85c:function(e,n,t){"use strict";(function(e,n){var a=t("4ea4");t("7947"),t("a9ff");a(t("66fd"));var r=a(t("6891"));e.__webpack_require_UNI_MP_PLUGIN__=t,n(r.default)}).call(this,t("bc2e")["default"],t("543d")["createPage"])}},[["e85c","common/runtime","common/vendor"]]]);