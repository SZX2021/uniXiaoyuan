(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/my/components/userInfo"],{2453:function(e,t,n){"use strict";n.r(t);var a=n("34cf"),r=n.n(a);for(var u in a)["default"].indexOf(u)<0&&function(e){n.d(t,e,(function(){return a[e]}))}(u);t["default"]=r.a},"34cf":function(e,t,n){"use strict";(function(e,a){var r=n("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u=r(n("2eee")),o=r(n("c973")),i={data:function(){return{avatarUrl:"https://mmbiz.qpic.cn/mmbiz/icTdbqWNOwNRna42FI242Lcia07jQodd2FJGIYQfG0LAJGFxM4FbnQP6yfMxBgJ0F3YRqJCJ1aPAK2dQagdusBZg/0"}},methods:{onLoad:function(){},onChooseAvatar:function(t){var n=this,a=t.detail.avatarUrl;e.getFileSystemManager().readFile({filePath:a,encoding:"base64",success:function(e){console.log(e);var t="data:image/jpeg;base64,"+e.data;n.avatarUrl=t},fail:function(e){console.log("图片转换失败"+e)}})},formSubmit:function(t){var n=this;return(0,o.default)(u.default.mark((function r(){var o,i,c,s,f;return u.default.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(e.showLoading({title:"加载中"}),o=t.target.value,i={user_avatar:n.avatarUrl,user_name:o.userName,user_gender:o.radio,user_phoneNumber:o.phoneNumber,user_signature:o.signature},e.setStorageSync("user_info",i),c=n.rules(i),c.res){r.next=8;break}return e.showToast({title:c.title,icon:"none",duration:2e3}),r.abrupt("return",0);case 8:return s=e.getStorageSync("token"),r.next=11,a.callFunction({name:"user-info",data:{token:s,userInfo:i}});case 11:f=r.sent,"ok"==f.result?(e.hideLoading(),e.setStorageSync("user_info",i),e.reLaunch({url:"/pages/my/my"})):e.showToast({title:"保存失败",duration:2e3,icon:"error"});case 13:case"end":return r.stop()}}),r)})))()},rules:function(e){if(!e.user_name.length)return{title:"名字不能为空",res:0};return/^[1][3,4,5,7,8][0-9]{9}$/.test(e.user_phoneNumber)?{res:1}:{title:"手机号不正确",res:1}}}};t.default=i}).call(this,n("543d")["default"],n("a9ff")["default"])},6891:function(e,t,n){"use strict";n.r(t);var a=n("9b2d"),r=n("2453");for(var u in r)["default"].indexOf(u)<0&&function(e){n.d(t,e,(function(){return r[e]}))}(u);n("6baa");var o=n("f0c5"),i=Object(o["a"])(r["default"],a["b"],a["c"],!1,null,null,null,!1,a["a"],void 0);t["default"]=i.exports},"6baa":function(e,t,n){"use strict";var a=n("9d5e"),r=n.n(a);r.a},"9b2d":function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return r})),n.d(t,"a",(function(){}));var a=function(){var e=this.$createElement;this._self._c},r=[]},"9d5e":function(e,t,n){},e85c:function(e,t,n){"use strict";(function(e,t){var a=n("4ea4");n("7947"),n("a9ff");a(n("66fd"));var r=a(n("6891"));e.__webpack_require_UNI_MP_PLUGIN__=n,t(r.default)}).call(this,n("bc2e")["default"],n("543d")["createPage"])}},[["e85c","common/runtime","common/vendor"]]]);