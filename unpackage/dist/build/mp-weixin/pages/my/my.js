(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/my/my"],{"3b03":function(e,n,t){"use strict";t.d(n,"b",(function(){return a})),t.d(n,"c",(function(){return r})),t.d(n,"a",(function(){}));var a=function(){var e=this.$createElement;this._self._c},r=[]},"3eb9":function(e,n,t){},"572a":function(e,n,t){"use strict";(function(e,a,r){var o=t("4ea4");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var u=o(t("2eee")),c=o(t("c973")),i=(o(t("541e")),{components:{},data:function(){return{list:[{left:"icon-guanyuwomen",text:"关于我们",right:"icon-youjiantou2",url:"/pages/my/components/About"}],userInfo:{nickName:"未设置名称",avatarUrl:"../../static/touxiang.png"},token:"",userInfoUrl:"/pages/my/components/userInfo"}},methods:{onLoad:function(){var n=e.getStorageSync("token");if(n){var t=e.getStorageSync("user_info");this.token=n,this.userInfo.avatarUrl=t.user_avatar,this.userInfo.nickName=t.user_name}},login:function(){var n=this;return(0,c.default)(u.default.mark((function t(){var o,c,i,s,f;return u.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.showLoading({title:"加载中"}),t.next=3,a.getUserProfile({desc:"Wexin"});case 3:return o=t.sent,t.next=6,e.login({provider:"weixin"});case 6:return c=t.sent,console.log(c),i=c.code,t.prev=9,t.next=12,r.callFunction({name:"user-register",data:{code:i,avatarUrl:o.userInfo.avatarUrl,nickName:o.userInfo.nickName}});case 12:s=t.sent,f=s.result,e.hideLoading(),e.setStorageSync("user_info",f.user),e.setStorageSync("token",f.token),n.token=s.token,n.userInfo.avatarUrl=f.user.user_avatar,n.userInfo.nickName=f.user.user_name,e.redirectTo({url:"my"}),t.next=27;break;case 23:t.prev=23,t.t0=t["catch"](9),e.hideLoading(),e.showToast({title:"登录失败",icon:"error",duration:2e3});case 27:case"end":return t.stop()}}),t,null,[[9,23]])})))()},jumpUserInfo:function(){a.navigateTo({url:this.userInfoUrl})}}});n.default=i}).call(this,t("543d")["default"],t("bc2e")["default"],t("a9ff")["default"])},6605:function(e,n,t){"use strict";var a=t("3eb9"),r=t.n(a);r.a},a777:function(e,n,t){"use strict";(function(e,n){var a=t("4ea4");t("7947"),t("a9ff");a(t("66fd"));var r=a(t("c5c8"));e.__webpack_require_UNI_MP_PLUGIN__=t,n(r.default)}).call(this,t("bc2e")["default"],t("543d")["createPage"])},bf2d:function(e,n,t){"use strict";t.r(n);var a=t("572a"),r=t.n(a);for(var o in a)["default"].indexOf(o)<0&&function(e){t.d(n,e,(function(){return a[e]}))}(o);n["default"]=r.a},c5c8:function(e,n,t){"use strict";t.r(n);var a=t("3b03"),r=t("bf2d");for(var o in r)["default"].indexOf(o)<0&&function(e){t.d(n,e,(function(){return r[e]}))}(o);t("6605");var u=t("f0c5"),c=Object(u["a"])(r["default"],a["b"],a["c"],!1,null,null,null,!1,a["a"],void 0);n["default"]=c.exports}},[["a777","common/runtime","common/vendor"]]]);